<!DOCTYPE html>

<head>
    <script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface@1.0/cdn/ServiceDock.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src = "js/pythonCode/arm_edit.js"></script>
    <script src = "js/pythonCode/arm.js"></script>

    <link rel = "stylesheet" href = "css/mainPage.css">

    <script
    src="https://code.jquery.com/jquery-3.6.0.js"
    integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous">
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.min.css'>

    <title>Gamemaster Page</title>
</head>

<body>
    <service-airtable id = "service_airtable" hidden></service-airtable>
    <service-airtable id = "service_airtable2" hidden></service-airtable>

    <iframe name = "loginForm" style = "display: none"></iframe>

    <div id = "title">
        <h1 align = center>Tic-Tac-Throw</h1>
        <h3 align = center>Gamemaster Controls</h3>
    </div>

    <div align = center id = "passwordContainer">
        <h3>This page is password protected. Please enter the correct password to continue:</h3>
        <form  target = "loginForm">
            <label for="password" id = "passwordLabel" class = "formLabel" style = >Password:</label><br><br>
            <input type="password" id="passwordInput" name="password" value="" class = "text-input"><br><br>
            <button type = 'button' id = "passwordSubmit" onclick = 'submitPassword()'>Submit</button>
        </form>
    </div>


    
    <div id = "logon" class = "center">
        
        
    </div>

    <div id = "controls" class = "center" hidden>
        <div align = center id = "spikeBox" class = "boxed">

        </div>
        <br><br>
        <div class = "center_buttons" >
            <form>
                <div class = 'formBox' style ="display: inline-block;">
                    <label for="angle">Enter an Angle (-90 to 90)</label>
                    <input type="number" id="fname" name="angle" value="0" width="48">
                </div>
                <div class = 'formBox' style="display: inline-block;">
                    <label for="power">Power (0 to 100)</label>
                <input type="number" id="lname" name="power" value="0" width="48">
                </div>
                
                
            </form> 
        </div>
<br><br>
        <button id = "execute_button" type = "button" onclick = "controlRobot()">Execute</button> <br><br><br>

        <div id = "programControl" class = "center_buttons">
            <button type = "button" id = "run_code" onclick="runCode()">Run Program</button>
            <button type = "button" id = "stop_code" onclick="stopCode()">Stop Program</button>

        </div>

        <br><br>

        <div id = "gameControl" class = "center_buttons">
            <button type = "button" id = "startGame" onclick="startGame()">Start Game</button>
            <button type = "button" id = "stopGame" onclick="stopGame()">Stop Game</button>

        </div>

        <div id = "controlPlayers">
            <h3>Players in Lobby</h3>

            <button type = "button" onclick="resetLobby()">Reset Lobby</button><br><br>

            <table id = "playerTable">
                <tr>
                    <th>Username</th>
                    <th>Player ID</th>
                    <th>Actions</th>
                </tr>

            </table>
        </div>
    </div>
    



    <script src = "js/cookies.js"></script>
    
    <script src = "js/authenticate.js"></script>
    

    <!-- 
    Used SweetAlert2 Library to make popups
    https://sweetalert2.github.io/#examples
    -->
    <script>

    var toastMixin = Swal.mixin({
        toast: true,
        icon: 'success',
        title: 'General Title',
        animation: false,
        position: 'top-right',
        showConfirmButton: false,
        timer: 4000,
        timerProgressBar: true,
        didOpen: (toast) => {
        toast.addEventListener('mouseenter', Swal.stopTimer)
        toast.addEventListener('mouseleave', Swal.resumeTimer)
        }
    });
    /*
    document.querySelector("#passwordSubmit").addEventListener('click', function(){
        Swal.fire("Our First Alert");
    });
    */

    document.querySelector("#passwordSubmit").addEventListener('click', function(){
        setTimeout(() => {
            if (correctPassword){
                toastMixin.fire({
                    animation: true,
                    title: 'Log In was Successful'
                });
            }
            else{
                toastMixin.fire({
                    title: 'Wrong Password, Please Try Again',
                    icon: 'error'
                });
            }
        }, 100);
    
    });
    </script>
    
</body>